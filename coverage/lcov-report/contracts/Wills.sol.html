<!doctype html>
<html lang="en">
<head>
    <title>Code coverage report for contracts/Wills.sol</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="../prettify.css" />
    <link rel="stylesheet" href="../base.css" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style type='text/css'>
        .coverage-summary .sorter {
            background-image: url(../sort-arrow-sprite.png);
        }
    </style>
</head>
<body>
<div class='wrapper'>
  <div class='pad1'>
    <h1>
      <a href="../index.html">all files</a> / <a href="index.html">contracts/</a> Wills.sol
    </h1>
    <div class='clearfix'>
      <div class='fl pad1y space-right2'>
        <span class="strong">100% </span>
        <span class="quiet">Statements</span>
        <span class='fraction'>40/40</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">92.11% </span>
        <span class="quiet">Branches</span>
        <span class='fraction'>35/38</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">100% </span>
        <span class="quiet">Functions</span>
        <span class='fraction'>14/14</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">100% </span>
        <span class="quiet">Lines</span>
        <span class='fraction'>77/77</span>
      </div>
    </div>
  </div>
  <div class='status-line high'></div>
<pre><table class="coverage">
<tr><td class="line-count quiet">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224</td><td class="line-coverage quiet"><span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">6×</span>
<span class="cline-any cline-yes">5×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">4×</span>
<span class="cline-any cline-yes">4×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">3×</span>
<span class="cline-any cline-yes">3×</span>
<span class="cline-any cline-yes">3×</span>
<span class="cline-any cline-yes">3×</span>
<span class="cline-any cline-yes">3×</span>
<span class="cline-any cline-yes">3×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">3×</span>
<span class="cline-any cline-yes">3×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">3×</span>
<span class="cline-any cline-yes">3×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">3×</span>
<span class="cline-any cline-yes">3×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">3×</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">3×</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">3×</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">9×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">11×</span>
<span class="cline-any cline-yes">9×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">5×</span>
<span class="cline-any cline-yes">4×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">21×</span>
<span class="cline-any cline-yes">19×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">16×</span>
<span class="cline-any cline-yes">13×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span></td><td class="text"><pre class="prettyprint lang-js">pragma solidity ^0.4.24;
&nbsp;
import './SafeMath.sol';
import './Database.sol';
import './MyBitBurner.sol';
import './ERC20.sol';
&nbsp;
// @notice This contract allows someone to leave ETH for another user in the case that they become unresponsive for x sec
// TODO: can structure this to have the recipient claim creators death, which starts the proofExpiration. Problem with this approach is that we need a good way to notify the creator.
contract Wills {
  using SafeMath for uint;
&nbsp;
  Database public database;
  MyBitBurner public mybBurner;
  address public owner;
&nbsp;
  uint public mybFee = 250000000000000000000;
  bool public expired = false;
&nbsp;
  constructor(address _database, address _mybTokenBurner) public{
    owner = msg.sender;
    database = Database(_database);
    mybBurner = MyBitBurner(_mybTokenBurner);
  }
&nbsp;
  // @param (address) _recipient = Address of the recipient of the will`
  // @param (uint) _secBetweenProofs = Number of sec required without proof of existence before will funds are released
  // @param (bool) _revokeable = Boolean that sets whether this will can be revoked by the creator
  function createWill(address _recipient, uint _secBetweenProofs, bool _revokeable)
  external
  payable
  notZero(_secBetweenProofs)
  validAddress(_recipient)
  returns (bytes32 id) {
    require(!expired);
    require(mybBurner.burn(msg.sender, mybFee));
    //Test whether will exists
    id = keccak256(abi.encodePacked(msg.sender, _recipient, msg.value));  // Note user cannot create another will with the same amount + recipient
    require(database.addressStorage(keccak256(abi.encodePacked('willCreator', id))) == address(0));   // Make sure struct isn't already created
&nbsp;
    database.setAddress(keccak256(abi.encodePacked('willCreator', id)), msg.sender);
    database.setAddress(keccak256(abi.encodePacked('willRecipient', id)), _recipient);
    database.setUint(keccak256(abi.encodePacked('willAmount', id)), msg.value);
    database.setUint(keccak256(abi.encodePacked('willSecBetweenProofs', id)), _secBetweenProofs);
    database.setUint(keccak256(abi.encodePacked('willProofExpiration', id)), _secBetweenProofs.add(block.timestamp));
    database.setBool(keccak256(abi.encodePacked('willRevokeable', id)), _revokeable);
&nbsp;
    emit LogWillCreated(msg.sender, _recipient, msg.value, id);
    return id;
  }
&nbsp;
    // @param (address) _recipient = Address of the recipient of the will`
  // @param (uint) _secBetweenProofs = Number of sec required without proof of existence before will funds are released
  // @param (bool) _revokeable = Boolean that sets whether this will can be revoked by the creator
  // @param _tokenAddress = Address of erc20 token
  // @param _value Amount of tokens in wei
  function createERC20Will(address _recipient, uint _secBetweenProofs, bool _revokeable, address _tokenAddress, uint256 _value)
  external
  notZero(_secBetweenProofs)
  notZero(_value)
  validAddress(_recipient)
  validAddress(_tokenAddress)
  returns (bytes32 id) {
    <span class="missing-if-branch" title="else path not taken" >E</span>require(!expired);
    <span class="missing-if-branch" title="else path not taken" >E</span>require(mybBurner.burn(msg.sender, mybFee));
    //Test whether will exists
    id = keccak256(abi.encodePacked(msg.sender, _recipient, _value, _tokenAddress));  // Note user cannot create another will with the same amount + recipient + token
    require(database.addressStorage(keccak256(abi.encodePacked('willCreator', id))) == address(0));   // Make sure struct isn't already created
    
    ERC20 token = ERC20(_tokenAddress);
    <span class="missing-if-branch" title="else path not taken" >E</span>require(token.transferFrom(msg.sender, this, _value));
&nbsp;
    database.setAddress(keccak256(abi.encodePacked('erc20Address', id)), _tokenAddress);
    database.setAddress(keccak256(abi.encodePacked('willCreator', id)), msg.sender);
    database.setAddress(keccak256(abi.encodePacked('willRecipient', id)), _recipient);
    database.setUint(keccak256(abi.encodePacked('willAmount', id)), _value);
    database.setUint(keccak256(abi.encodePacked('willSecBetweenProofs', id)), _secBetweenProofs);
    database.setUint(keccak256(abi.encodePacked('willProofExpiration', id)), _secBetweenProofs.add(block.timestamp));
    database.setBool(keccak256(abi.encodePacked('willRevokeable', id)), _revokeable);
&nbsp;
    emit LogERC20WillCreated(msg.sender, _recipient, _value, _tokenAddress, id);
    return id;
  }
&nbsp;
  // @param (bytes32) _id = Bill ID that is returned by createWill()
  function proveExistence(bytes32 _id)
  external
  onlyCaller( database.addressStorage(keccak256(abi.encodePacked('willCreator', _id))) ){
    require( database.uintStorage(keccak256(abi.encodePacked('willProofExpiration', _id))).sub(block.timestamp) &lt; database.uintStorage(keccak256(abi.encodePacked('willSecBetweenProofs', _id))) );  // Can only extend proofExpiration once
    database.setUint(keccak256(abi.encodePacked('willProofExpiration', _id)), database.uintStorage(keccak256(abi.encodePacked('willProofExpiration', _id))).add( database.uintStorage(keccak256(abi.encodePacked('willSecBetweenProofs', _id))) ) );
  }
&nbsp;
  // @param (bytes32) _id = Bill ID that is returned by createWill()
  function revokeWill(bytes32 _id)
  external
  isRevokeable(_id)
  onlyCaller( database.addressStorage(keccak256(abi.encodePacked('willCreator', _id))) ){
    require( block.timestamp &lt; database.uintStorage(keccak256(abi.encodePacked('willProofExpiration', _id))) );
    uint amountWEI = database.uintStorage(keccak256(abi.encodePacked('willAmount', _id)));
    database.deleteAddress(keccak256(abi.encodePacked('willCreator', _id)));
    database.deleteAddress(keccak256(abi.encodePacked('willRecipient', _id)));
    database.deleteUint(keccak256(abi.encodePacked('willAmount', _id)));
    database.deleteUint(keccak256(abi.encodePacked('willSecBetweenProofs', _id)));
    database.deleteUint(keccak256(abi.encodePacked('willProofExpiration', _id)));
    database.deleteBool(keccak256(abi.encodePacked('willRevokeable', _id)));
&nbsp;
    address tokenAddress = database.addressStorage(keccak256(abi.encodePacked('erc20Address', _id)));
    if (tokenAddress != address(0)) {
      ERC20 token = ERC20(tokenAddress);
      token.transfer(msg.sender, amountWEI);
      database.deleteAddress(keccak256(abi.encodePacked('erc20Address', _id)));
    } else {
      msg.sender.transfer(amountWEI);
    }
    emit LogWillRevoked(_id, msg.sender, amountWEI);
  }
&nbsp;
  // @param (bytes32) _id = Bill ID that is returned by createWill()
  function claimWill(bytes32 _id)
  external
  onlyCaller( database.addressStorage(keccak256(abi.encodePacked('willRecipient', _id))) ){
    require( block.timestamp &gt;= database.uintStorage(keccak256(abi.encodePacked('willProofExpiration', _id))) );
    uint amountWEI = database.uintStorage(keccak256(abi.encodePacked('willAmount', _id)));
    database.deleteAddress(keccak256(abi.encodePacked('willCreator', _id)));
    database.deleteAddress(keccak256(abi.encodePacked('willRecipient', _id)));
    database.deleteUint(keccak256(abi.encodePacked('willAmount', _id)));
    database.deleteUint(keccak256(abi.encodePacked('willSecBetweenProofs', _id)));
    database.deleteUint(keccak256(abi.encodePacked('willProofExpiration', _id)));
    database.deleteBool(keccak256(abi.encodePacked('willRevokeable', _id)));
&nbsp;
    address tokenAddress = database.addressStorage(keccak256(abi.encodePacked('erc20Address', _id)));
    if (tokenAddress != address(0)) {
      ERC20 token = ERC20(tokenAddress);
      token.transfer(msg.sender, amountWEI);
      database.deleteAddress(keccak256(abi.encodePacked('erc20Address', _id)));
    } else {
      msg.sender.transfer(amountWEI);
    }
    emit LogWillClaimed(_id, msg.sender, amountWEI);
  }
&nbsp;
  // @param (bytes32) _id = Bill ID that is returned by createWill()
  // @param (uint) _newDesiredSec = Number of sec required without proof of existence before will funds are released
  function changeSecBetweenProofs(bytes32 _id, uint _newDesiredSec)
  external
  onlyCaller( database.addressStorage(keccak256(abi.encodePacked('willCreator', _id))) )
  notZero(_newDesiredSec) {
      database.setUint(keccak256(abi.encodePacked('willSecBetweenProofs', _id)), _newDesiredSec);
&nbsp;
  }
&nbsp;
  // @notice If called by owner, this function prevents more Wills from being created
  // @notice Old contracts will continue to function
  function closeContract()
  external {
    require(msg.sender == owner);
    require (!expired);
    expired = true;
  }
&nbsp;
  // @param (uint) _newFee = New MyBit token burn fee
  function changeMYBFee(uint _newFee)
  external {
    require(msg.sender == owner);
    mybFee = _newFee;
  }
&nbsp;
  //////////////////////////////////////////////////////////////////////////////////////////////////////////////////
  //                                            View functions
  //////////////////////////////////////////////////////////////////////////////////////////////////////////////////
&nbsp;
  // @param (bytes32) _id = Bill ID that is returned by createWill() or createERC20Will
  function getWill(bytes32 _id)
  external
  view
  returns (address, address, uint, uint, uint, bool, address) {
    return(
      database.addressStorage(keccak256(abi.encodePacked('willCreator', _id))),
      database.addressStorage(keccak256(abi.encodePacked('willRecipient', _id))),
      database.uintStorage(keccak256(abi.encodePacked('willAmount', _id))),
      database.uintStorage(keccak256(abi.encodePacked('willSecBetweenProofs', _id))),
      database.uintStorage(keccak256(abi.encodePacked('willProofExpiration', _id))),
      database.boolStorage(keccak256(abi.encodePacked('willRevokeable', _id))),
      database.addressStorage(keccak256(abi.encodePacked('erc20Address', _id)))
    );
  }
&nbsp;
  //////////////////////////////////////////////////////////////////////////////////////////////////////////////////
  //                                            Modifiers
  //////////////////////////////////////////////////////////////////////////////////////////////////////////////////
&nbsp;
  // @notice reverts if msg.sender isn't the specified caller
  modifier onlyCaller(address _caller) {
    require(msg.sender == _caller);
    _;
  }
&nbsp;
  // @notice reverts if will is not revokeable
  modifier isRevokeable(bytes32 _id) {
    require(database.boolStorage(keccak256(abi.encodePacked('willRevokeable', _id))));
    _;
  }
&nbsp;
  // @notice reverts if integer is 0
  modifier notZero(uint _number) {
    require(_number &gt; 0);
    _;
  }
&nbsp;
  modifier validAddress(address _addr) {
    require(_addr != address(0));
    _;
  }
&nbsp;
  //////////////////////////////////////////////////////////////////////////////////////////////////////////////////
  //                                            Events
  //////////////////////////////////////////////////////////////////////////////////////////////////////////////////
  event LogERC20WillCreated(address indexed _creator, address _recipient, uint _amount, address _tokenAddress, bytes32 _id);
  event LogWillCreated(address indexed _creator, address _recipient, uint _amount, bytes32 _id);
  event LogWillClaimed(bytes32 indexed _id, address _recipient, uint _amount);
  event LogWillRevoked(bytes32 indexed _id, address _recipient, uint _amount);
&nbsp;
}
&nbsp;</pre></td></tr>
</table></pre>
<div class='push'></div><!-- for sticky footer -->
</div><!-- /wrapper -->
<div class='footer quiet pad2 space-top1 center small'>
  Code coverage
  generated by <a href="http://istanbul-js.org/" target="_blank">istanbul</a> at Sun Dec 16 2018 01:57:16 GMT+0800 (GMT+08:00)
</div>
</div>
<script src="../prettify.js"></script>
<script>
window.onload = function () {
        if (typeof prettyPrint === 'function') {
            prettyPrint();
        }
};
</script>
<script src="../sorter.js"></script>
</body>
</html>
